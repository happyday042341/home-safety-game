<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å±…å®¶å®‰å…¨å®ˆè­·è€… - æ‰¾å‡ºæ½›åœ¨å±éšª</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Microsoft JhengHei', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .game-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .game-header {
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .game-title {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .game-subtitle { font-size: 1.2rem; opacity: 0.9; }

    .game-stats {
      display: flex;
      justify-content: space-around;
      background: #f8f9fa;
      padding: 20px;
      border-bottom: 3px solid #e9ecef;
    }

    .stat-item {
      text-align: center;
      padding: 15px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      min-width: 120px;
    }

    .stat-number { font-size: 2rem; font-weight: bold; color: #ff6b6b; display: block; }
    .stat-label { color: #666; font-size: 0.9rem; margin-top: 5px; }

    .image-container {
      position: relative;
      display: flex;
      justify-content: center;
      padding: 40px;
      background: #f8f9fa;
      min-height: 700px;
    }

    .house-image {
      width: 100%;
      max-width: 900px;
      height: auto;
      min-height: 600px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      cursor: crosshair;
      background: #f0f0f0;
    }

    /* å±éšªé»ï¼šé è¨­å®Œå…¨éš±è—ï¼Œä¸é¡¯ç¤ºç´…è‰²è„ˆå‹• */
    .danger-point {
      position: absolute;
      left: 0; top: 0;
      width: 30px; height: 30px;
      border: 3px solid #ff4757;
      border-radius: 50%;
      background: rgba(255, 71, 87, 0.2);
      cursor: pointer;
      transform: translate(-50%, -50%);
      display: none;              /* ç›´åˆ°è¢«é»åˆ°æ‰å‡ºç¾ */
      opacity: 0;                 /* å…ˆé€æ˜ï¼Œé¡¯ç¤ºæ™‚éæ¸¡ */
      transition: transform .2s ease, opacity .2s ease, background .2s ease;
    }

    /* åªæœ‰è¢«ç™¼ç¾(revealed)å¾Œï¼Œæ‰å•Ÿç”¨è„ˆå‹•å‹•ç•«èˆ‡é¡¯ç¤º */
    .danger-point.revealed {
      display: block;
      opacity: 1;
      animation: pulse 2s infinite;
    }

    .danger-point:hover { background: rgba(255, 71, 87, 0.4); transform: translate(-50%, -50%) scale(1.1); }

    .protection-sticker {
      position: absolute;
      width: 60px; height: 60px;
      background: linear-gradient(135deg, #2ed573, #1e90ff);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      color: white; font-size: 1.5rem; font-weight: bold;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transform: translate(-50%, -50%);
      animation: sticker-appear 0.5s ease-out;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); }
    }

    @keyframes sticker-appear {
      0% { transform: translate(-50%, -50%) scale(0) rotate(180deg); }
      100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
    }

    .modal {
      display: none;
      position: fixed; inset: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      justify-content: center; align-items: center;
    }

    .modal-content {
      background: white; padding: 40px; border-radius: 20px; text-align: center;
      max-width: 500px; margin: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    .modal-title { font-size: 1.8rem; color: #ff6b6b; margin-bottom: 15px; font-weight: bold; }
    .modal-description { font-size: 1.1rem; color: #666; line-height: 1.6; margin-bottom: 25px; }

    .modal-button {
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      color: white; border: none; padding: 15px 30px; border-radius: 25px;
      font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease;
    }

    .modal-button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }

    .completion-modal { background: linear-gradient(135deg, #2ed573, #1e90ff); color: white; }
    .completion-modal .modal-title { color: white; font-size: 2.2rem; }

    .instructions { background: #e3f2fd; padding: 20px; margin: 20px 30px; border-radius: 15px; border-left: 5px solid #2196f3; }
    .instructions h3 { color: #1976d2; margin-bottom: 10px; font-size: 1.3rem; }
    .instructions p { color: #555; line-height: 1.6; }

    @media (max-width: 768px) {
      .game-title { font-size: 2rem; }
      .game-stats { flex-direction: column; gap: 15px; }
      .stat-item { margin: 0 auto; }
      .image-container { padding: 15px; }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="game-header">
      <h1 class="game-title">ğŸ  å±…å®¶å®‰å…¨å®ˆè­·è€…</h1>
      <p class="game-subtitle">æ‰¾å‡ºæ½›åœ¨å±éšªï¼Œè²¼ä¸Šå®ˆè­·æ¨™ç±¤ä¿è­·å®¶äººå®‰å…¨</p>
    </div>

    <div class="instructions">
      <h3>ğŸ¯ éŠæˆ²èªªæ˜</h3>
      <p>ä»”ç´°è§€å¯Ÿå±…å®¶åœ–ç‰‡ï¼Œé»æ“Šæ‚¨ç™¼ç¾çš„æ½›åœ¨å±éšªè™•ã€‚æ¯æ‰¾åˆ°ä¸€è™•å±éšªï¼Œå°±æœƒå‡ºç¾ä¸€å¼µå®ˆè­·æ¨™ç±¤ä¾†ä¿®æ­£å•é¡Œã€‚ç›®æ¨™æ˜¯æ‰¾å‡ºè‡³å°‘5è™•å±éšªï¼Œè®“å®¶åº­æ›´å®‰å…¨ï¼</p>
    </div>

    <div class="game-stats">
      <div class="stat-item">
        <span class="stat-number" id="found-count">0</span>
        <div class="stat-label">å·²æ‰¾åˆ°å±éšª</div>
      </div>
      <div class="stat-item">
        <span class="stat-number" id="total-count">18</span>
        <div class="stat-label">ç¸½å±éšªæ•¸</div>
      </div>
      <div class="stat-item">
        <span class="stat-number" id="progress">0%</span>
        <div class="stat-label">å®Œæˆé€²åº¦</div>
      </div>
    </div>

    <div class="image-container">
      <img
        src="https://i.postimg.cc/zGxLCdrT/Chat-GPT-Image-2025-7-2-02-52-51.png"
        alt="å±…å®¶å®‰å…¨æª¢æŸ¥åœ–"
        class="house-image"
        id="house-image"
        referrerpolicy="no-referrer"
        crossorigin="anonymous"
        onerror="this.alt='åœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼Œè«‹æ”¹ç”¨åœ–ç‰‡ç›´é€£ï¼ˆ.jpg/.pngï¼‰';"
      />
    </div>
  </div>

  <div class="modal" id="danger-modal">
    <div class="modal-content">
      <h2 class="modal-title" id="modal-title">ç™¼ç¾å±éšªï¼</h2>
      <p class="modal-description" id="modal-description"></p>
      <button class="modal-button" onclick="closeDangerModal()">è²¼ä¸Šå®ˆè­·æ¨™ç±¤ ğŸ›¡ï¸</button>
    </div>
  </div>

  <div class="modal" id="completion-modal">
    <div class="modal-content completion-modal">
      <h2 class="modal-title">ğŸ‰ æ­å–œå®Œæˆï¼</h2>
      <p class="modal-description">æ‚¨å·²ç¶“æˆåŠŸæ‰¾å‡ºè¶³å¤ çš„å±…å®¶å±éšªä¸¦è²¼ä¸Šå®ˆè­·æ¨™ç±¤ï¼æ‚¨çš„å®¶ç¾åœ¨æ›´å®‰å…¨äº†ã€‚ç¹¼çºŒå°‹æ‰¾å‰©é¤˜çš„å±éšªé»ï¼Œè®“å®¶åº­ç’°å¢ƒæ›´åŠ å®Œå–„ã€‚</p>
      <button class="modal-button" onclick="closeCompletionModal()" style="background: rgba(255,255,255,0.2); border: 2px solid white;">ç¹¼çºŒéŠæˆ²</button>
    </div>
  </div>

  <script>
    const dangerData = [
      // â–¶ï¸ å»šæˆ¿ (ç´…è‰²)
      { x: 64, y: 26, title: "å»šæˆ¿çˆç«æ²’é—œ", description: "é‹å­åœ¨çˆä¸Šç…®æ±è¥¿ä½†æ²’é—œç«ä¹Ÿæ²’è“‹é‹è“‹ï¼Œæœ‰ç«ç½å’Œç‡™å‚·é¢¨éšªã€‚", room: "å»šæˆ¿" },
      { x: 60, y: 32, title: "åˆ€å…·æœªæ”¶ç´", description: "åˆ€å­æ”¾åœ¨æ¡Œä¸Šæ²’æ”¶å¥½ï¼Œå®¹æ˜“é€ æˆå‰²å‚·ï¼Œæ‡‰æ”¾å…¥åˆ€æ¶æˆ–æŠ½å±œã€‚", room: "å»šæˆ¿" },
      { x: 62, y: 22, title: "ç“¦æ–¯çˆæ—æ¯›å·¾", description: "ç“¦æ–¯çˆé‚Šæ™¾æ¯›å·¾æœ‰ç«ç½é¢¨éšªï¼Œæ¯›å·¾æ‡‰é é›¢ç«æºæ™¾æ›¬ã€‚", room: "å»šæˆ¿" },

      // â–¶ï¸ å®¢å»³ (è—è‰²)
      { x: 86, y: 18, title: "çª—ç°¾æ‹‰ç¹©", description: "ä½æ›çš„çª—ç°¾æ‹‰ç¹©æ²’æœ‰ç¶èµ·ä¾†ï¼Œå¯èƒ½é€ æˆå¹¼å…’çºç¹å±éšªï¼Œæ‡‰ç¶é«˜æˆ–ä½¿ç”¨å®‰å…¨æ‰£ã€‚", room: "å®¢å»³" },
      { x: 57, y: 40, title: "è—¥å“æ”¾ç½®ä¸ç•¶", description: "èŒ¶å‡ ä¸Šæ”¾ç½®è—¥å“ï¼Œå¹¼å…’å®¹æ˜“èª¤é£Ÿï¼Œæ‡‰æ”¾åœ¨é«˜è™•æˆ–ä¸Šé–æ«ƒå­è£¡ã€‚", room: "å®¢å»³" },
      { x: 53, y: 45, title: "æ¡Œè§’é‹’åˆ©", description: "èŒ¶å‡ å››è§’é‹’åˆ©ï¼Œå¹¼å…’è·‘å‹•æ™‚å®¹æ˜“æ’å‚·ï¼Œæ‡‰å®‰è£é˜²æ’è§’å¥—ã€‚", room: "å®¢å»³" },
      { x: 56, y: 58, title: "é›»æš–çˆæ”¾åœ°ä¸Š", description: "é›»æš–çˆæ”¾åœ¨åœ°ä¸Šï¼Œå¹¼å…’å¯èƒ½æ‹‰æ‰¯é›»ç·šç‡™å‚·ï¼Œæ‡‰æ”¾åœ¨å®‰å…¨é«˜è™•ã€‚", room: "å®¢å»³" },
      { x: 90, y: 20, title: "çª—å°éä½", description: "çª—æˆ¶çª—å°é«˜åº¦å¾ˆä½ï¼Œå¹¼å…’å®¹æ˜“çˆ¬ä¸Šè·Œè½ï¼Œæ‡‰å®‰è£çª—æˆ¶å®‰å…¨é–ã€‚", room: "å®¢å»³" },

      // â–¶ï¸ æˆ¿é–“ (ç¶ è‰²)
      { x: 33, y: 63, title: "å¬°å…’åºŠç„¡è­·æ¬„", description: "å¬°å…’åºŠé‚Šæ²’æœ‰è­·æ¬„ï¼Œå¬°å…’å¯èƒ½è·Œè½ï¼Œæ‡‰å®‰è£åºŠé‚Šè­·æ¬„ã€‚", room: "è‡¥å®¤" },
      { x: 30, y: 74, title: "åœ°é¢æ•£è½å°é›¶ä»¶", description: "å°é›¶ä»¶æ‰åœ¨åœ°ä¸Šï¼Œå¬°å…’å¯èƒ½èª¤é£Ÿçª’æ¯ï¼Œæ‡‰ç«‹å³æ¸…ç†ã€‚", room: "è‡¥å®¤" },

      // â–¶ï¸ æµ´å®¤ (ç´«è‰²)
      { x: 63, y: 76, title: "åœ°æ¿æ¿•æ»‘", description: "æµ´å®¤åœ°æ¿æ¿•æ»‘æ²’æœ‰é˜²æ»‘å¢Šï¼Œå®¹æ˜“æ»‘å€’å—å‚·ï¼Œæ‡‰é‹ªè¨­é˜²æ»‘å¢Šã€‚", room: "æµ´å®¤" },
      { x: 70, y: 63, title: "å‰ªåˆ€æ”¾æ´—æ‰‹å°", description: "å‰ªåˆ€æ”¾åœ¨æ´—æ‰‹å°ä¸Šï¼Œå¹¼å…’å®¹æ˜“æ‹¿åˆ°å—å‚·ï¼Œæ‡‰æ”¶ç´åœ¨å®‰å…¨è™•ã€‚", room: "æµ´å®¤" },
      { x: 73, y: 71, title: "æ¸…æ½”åŠ‘äº‚æ”¾", description: "æ¸…æ½”åŠ‘æ”¾åœ¨åœ°ä¸Šï¼Œå¹¼å…’å¯èƒ½èª¤é£Ÿä¸­æ¯’ï¼Œæ‡‰æ”¾åœ¨é«˜è™•æˆ–ä¸Šé–æ«ƒå­ã€‚", room: "æµ´å®¤" }
    ];

    let foundDangers = [];
    let currentDangerIndex = -1;
    let gameCompleted = false;

    function initGame() {
      const image = document.getElementById('house-image');
      const totalCountEl = document.getElementById('total-count');
      if (totalCountEl) totalCountEl.textContent = dangerData.length;
      image.addEventListener('load', createDangerPoints);
      if (image.complete) createDangerPoints();
    }

    function createDangerPoints() {
      const container = document.querySelector('.image-container');
      const image = document.getElementById('house-image');

      image.onclick = function (event) {
        const rect = image.getBoundingClientRect();
        const x = ((event.clientX - rect.left) / rect.width) * 100;
        const y = ((event.clientY - rect.top) / rect.height) * 100;

        dangerData.forEach((danger, index) => {
          if (foundDangers.includes(index)) return;
          const distance = Math.hypot(x - danger.x, y - danger.y);
          if (distance <= 8) {
            revealDangerPoint(index);
            openDangerModal(index);
          }
        });
      };

      dangerData.forEach((danger, index) => {
        const point = document.createElement('div');
        point.className = 'danger-point';
        point.style.left = danger.x + '%';
        point.style.top = danger.y + '%';
        point.title = `${danger.room} - ${danger.title}`;
        point.addEventListener('click', () => openDangerModal(index));
        container.appendChild(point);
      });
    }

    function revealDangerPoint(index) {
      const els = document.querySelectorAll('.danger-point');
      const el = els[index];
      if (!el.classList.contains('revealed')) {
        el.classList.add('revealed');
      }
    }

    function openDangerModal(index) {
      if (foundDangers.includes(index)) return;
      currentDangerIndex = index;
      const danger = dangerData[index];
      document.getElementById('modal-title').textContent = `ğŸš¨ ${danger.room} - ${danger.title}`;
      document.getElementById('modal-description').textContent = danger.description;
      document.getElementById('danger-modal').style.display = 'flex';
    }

    function closeDangerModal() {
      document.getElementById('danger-modal').style.display = 'none';
      if (currentDangerIndex !== -1) {
        addProtectionSticker(currentDangerIndex);
        foundDangers.push(currentDangerIndex);
        updateStats();
        const els = document.querySelectorAll('.danger-point');
        els[currentDangerIndex].classList.remove('revealed');
        els[currentDangerIndex].style.display = 'none';
        currentDangerIndex = -1;
        if (foundDangers.length >= 5 && !gameCompleted) {
          gameCompleted = true;
          setTimeout(() => {
            document.getElementById('completion-modal').style.display = 'flex';
          }, 600);
        }
      }
    }

    function addProtectionSticker(index) {
      const container = document.querySelector('.image-container');
      const danger = dangerData[index];
      const sticker = document.createElement('div');
      sticker.className = 'protection-sticker';
      sticker.style.left = danger.x + '%';
      sticker.style.top = danger.y + '%';
      sticker.innerHTML = 'ğŸ›¡ï¸';
      sticker.title = `å·²ä¿®æ­£ï¼š${danger.title}`;
      container.appendChild(sticker);
    }

    function updateStats() {
      const foundCount = foundDangers.length;
      const totalCount = dangerData.length;
      const progress = Math.round((foundCount / totalCount) * 100);
      document.getElementById('found-count').textContent = foundCount;
      document.getElementById('progress').textContent = progress + '%';
    }

    function closeCompletionModal() {
      document.getElementById('completion-modal').style.display = 'none';
    }

    window.onclick = function (event) {
      const dangerModal = document.getElementById('danger-modal');
      const completionModal = document.getElementById('completion-modal');
      if (event.target === dangerModal) dangerModal.style.display = 'none';
      if (event.target === completionModal) completionModal.style.display = 'none';
    };

    window.onload = initGame;
  </script>
</body>
</html>
