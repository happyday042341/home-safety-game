
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å±…å®¶å®‰å…¨å®ˆè­·è€… - æ‰¾å‡ºæ½›åœ¨å±éšª</title>
  <style>
    *{box-sizing:border-box}
    body{font-family:'Microsoft JhengHei',Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);margin:0;padding:20px;min-height:100vh}
    .game-container{max-width:1200px;margin:auto;background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);overflow:hidden}
    .game-header{background:linear-gradient(135deg,#ff6b6b,#ee5a24);color:#fff;padding:24px;text-align:center}
    .game-title{margin:0;font-size:2rem;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.25)}
    .game-stats{display:flex;gap:16px;justify-content:center;background:#f7f7f9;border-top:1px solid #eee;border-bottom:1px solid #eee;padding:12px}
    .stat-item{background:#fff;border-radius:12px;box-shadow:0 6px 14px rgba(0,0,0,.08);padding:10px 16px;text-align:center;min-width:120px}
    .stat-number{display:block;color:#ff6b6b;font-weight:700;font-size:1.6rem}
    .stat-label{font-size:.9rem;color:#666}
    .image-wrap{position:relative;background:#f7f7f9;padding:24px;display:flex;justify-content:center}
    .house-image{max-width:900px;width:100%;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);cursor:crosshair;background:#eee}
    /* hidden hot-spots */
    .danger-point{position:absolute;width:30px;height:30px;border:3px solid #ff4757;border-radius:50%;background:rgba(255,71,87,.18);transform:translate(-50%,-50%);display:none;opacity:0;transition:.2s;z-index:2}
    .danger-point.revealed{display:block;opacity:1;animation:pulse 2s infinite}
    .danger-point.calib{display:block;opacity:1;animation:none}
    .danger-point:hover{background:rgba(255,71,87,.35);transform:translate(-50%,-50%) scale(1.08)}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,71,87,.6)}70%{box-shadow:0 0 0 12px rgba(255,71,87,0)}100%{box-shadow:0 0 0 0 rgba(255,71,87,0)}}
    .protection-sticker{position:absolute;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#2ed573,#1e90ff);display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.4rem;box-shadow:0 6px 18px rgba(0,0,0,.25);transform:translate(-50%,-50%);animation:pop .45s ease;z-index:3}
    @keyframes pop{0%{transform:translate(-50%,-50%) scale(0) rotate(180deg)}100%{transform:translate(-50%,-50%) scale(1) rotate(0)}}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.8);z-index:999}
    .modal-content{background:#fff;border-radius:16px;box-shadow:0 20px 40px rgba(0,0,0,.35);max-width:520px;margin:16px;padding:28px;text-align:center}
    .modal-title{margin:0 0 10px;color:#ff6b6b}
    .btn{appearance:none;border:0;border-radius:24px;padding:12px 20px;background:linear-gradient(135deg,#ff6b6b,#ee5a24);color:#fff;font-weight:600;cursor:pointer}
    .btn:hover{transform:translateY(-1px);box-shadow:0 10px 18px rgba(0,0,0,.2)}
    /* æ ¡æ­£æ¨¡å¼ */
    .toolbar{display:flex;gap:8px;justify-content:center;align-items:center;padding:10px;background:#f2f5ff;border-top:1px solid #e6ebff;flex-wrap:wrap}
    .toolbtn{border:1px solid #d0d7ff;background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
    .toolbtn.active{background:#e6ecff}
    .grid{position:absolute;inset:24px;pointer-events:none;z-index:1}
    .grid canvas{width:100%;height:100%;opacity:.35}
    /* æ‰‹æ©Ÿæ§åˆ¶é¢æ¿ï¼ˆåªåœ¨æ ¡æ­£æ¨¡å¼é¡¯ç¤ºï¼‰ */
    .calib-panel{display:none;gap:8px;justify-content:center;align-items:center;background:#fff;border-top:1px solid #eee;padding:10px}
    .calib-panel.show{display:flex;flex-wrap:wrap}
    .pad{display:grid;grid-template-columns:repeat(3,56px);grid-template-rows:repeat(3,44px);gap:8px;margin:6px}
    .pad button{border:1px solid #d0d7ff;background:#f9fbff;border-radius:10px;font-size:18px}
    .pad .blank{visibility:hidden}
    .col{display:flex;flex-direction:column;gap:6px;margin:6px}
    .row{display:flex;gap:6px;justify-content:center;align-items:center;flex-wrap:wrap}
    .pill{border:1px solid #d0d7ff;background:#fff;border-radius:999px;padding:6px 10px}
    .now{font-weight:700;color:#334155}
  </style>
</head>
<body>
  <div class="game-container">
    <div class="game-header">
      <h1 class="game-title">ğŸ  å±…å®¶å®‰å…¨å®ˆè­·è€…</h1>
      <p>ä¾ç…§åœˆåœˆä½ç½®æ‰¾å‡ºæ½›åœ¨å±éšªï¼Œè²¼ä¸Šå®ˆè­·æ¨™ç±¤</p>
    </div>

    <div class="game-stats">
      <div class="stat-item"><span class="stat-number" id="found-count">0</span><div class="stat-label">å·²æ‰¾åˆ°å±éšª</div></div>
      <div class="stat-item"><span class="stat-number" id="total-count">0</span><div class="stat-label">ç¸½å±éšªæ•¸</div></div>
      <div class="stat-item"><span class="stat-number" id="progress">0%</span><div class="stat-label">å®Œæˆé€²åº¦</div></div>
    </div>

    <div class="image-wrap">
      <img id="house-image" class="house-image"
           src="https://i.postimg.cc/zGxLCdrT/Chat-GPT-Image-2025-7-2-02-52-51.png"
           alt="å±…å®¶å®‰å…¨æª¢æŸ¥åœ–" crossorigin="anonymous" referrerpolicy="no-referrer">
      <div class="grid" id="grid" style="display:none"><canvas id="gridcv"></canvas></div>
    </div>

    <div class="toolbar">
      <button class="toolbtn" id="toggleCalib">åˆ‡æ›æ ¡æ­£æ¨¡å¼</button>
      <button class="toolbtn" id="copyJSON">è¤‡è£½åº§æ¨™ JSON</button>
      <span class="pill">ç›®å‰ï¼š<span id="nowName" class="now">â€”</span></span>
      <span style="color:#666">ï¼ˆé›»è…¦ï¼šA/D é¸é»ã€æ–¹å‘éµç§» 0.2%ï¼ŒShift=1%ï¼›æ‰‹æ©Ÿç”¨ä¸‹æ–¹æŒ‰éˆ•ï¼‰</span>
    </div>

    <!-- æ‰‹æ©Ÿæ ¡æ­£æ§åˆ¶é¢æ¿ -->
    <div class="calib-panel" id="calibPanel">
      <div class="col">
        <button class="toolbtn" id="prevBtn">ğŸ”™ ä¸Šä¸€å€‹</button>
        <button class="toolbtn" id="nextBtn">ğŸ”œ ä¸‹ä¸€å€‹</button>
      </div>
      <div class="pad">
        <button class="blank"></button>
        <button class="toolbtn" data-action="move" data-dx="0" data-dy="-0.2">â¬†ï¸</button>
        <button class="blank"></button>
        <button class="toolbtn" data-action="move" data-dx="-0.2" data-dy="0">â¬…ï¸</button>
        <button class="toolbtn" data-action="move" data-dx="0" data-dy="0">â—</button>
        <button class="toolbtn" data-action="move" data-dx="0.2" data-dy="0">â¡ï¸</button>
        <button class="blank"></button>
        <button class="toolbtn" data-action="move" data-dx="0" data-dy="0.2">â¬‡ï¸</button>
        <button class="blank"></button>
      </div>
      <div class="row">
        <button class="toolbtn" data-action="move" data-dx="-1" data-dy="0">â¬…ï¸â¬…ï¸ (-1%)</button>
        <button class="toolbtn" data-action="move" data-dx="1" data-dy="0">â¡ï¸â¡ï¸ (+1%)</button>
        <button class="toolbtn" data-action="move" data-dx="0" data-dy="-1">â¬†ï¸â¬†ï¸ (-1%)</button>
        <button class="toolbtn" data-action="move" data-dx="0" data-dy="1">â¬‡ï¸â¬‡ï¸ (+1%)</button>
      </div>
      <div class="row">
        <button class="toolbtn" id="copyJSON2">ğŸ“‹ è¤‡è£½åº§æ¨™ JSON</button>
      </div>
    </div>
  </div>

  <!-- å±éšªèªªæ˜å½ˆçª— -->
  <div class="modal" id="danger-modal">
    <div class="modal-content">
      <h2 class="modal-title" id="modal-title">ç™¼ç¾å±éšªï¼</h2>
      <p id="modal-description"></p>
      <button class="btn" onclick="closeDangerModal()">è²¼ä¸Šå®ˆè­·æ¨™ç±¤ ğŸ›¡ï¸</button>
    </div>
  </div>

  <!-- å®ŒæˆéŠæˆ²å½ˆçª— -->
  <div class="modal" id="completion-modal">
    <div class="modal-content" style="background:linear-gradient(135deg,#2ed573,#1e90ff);color:#fff">
      <h2 class="modal-title" style="color:#fff">ğŸ‰ æ­å–œå®Œæˆï¼</h2>
      <p>æ‚¨å·²ç¶“æˆåŠŸæ‰¾å‡ºè¶³å¤ çš„å±…å®¶å±éšªä¸¦è²¼ä¸Šå®ˆè­·æ¨™ç±¤ï¼</p>
      <button class="btn" onclick="closeCompletionModal()" style="background:rgba(255,255,255,.18);border:2px solid #fff">ç¹¼çºŒéŠæˆ²</button>
    </div>
  </div>

<script>
const dangerData = [
  { id:'stove_fire',   x: 26.5, y: 22.0, title:'å»šæˆ¿çˆç«æ²’é—œ', room:'å»šæˆ¿', description:'é‹å­åœ¨çˆä¸Šç…®æ±è¥¿ä½†æ²’é—œç«ä¹Ÿæ²’è“‹é‹è“‹ï¼Œæœ‰ç«ç½å’Œç‡™å‚·é¢¨éšªã€‚' },
  { id:'knife_out',    x: 17.2, y: 31.8, title:'åˆ€å…·æœªæ”¶ç´', room:'å»šæˆ¿', description:'åˆ€å­æ”¾åœ¨æ¡Œä¸Šæ²’æ”¶å¥½ï¼Œå®¹æ˜“é€ æˆå‰²å‚·ï¼Œæ‡‰æ”¾å…¥åˆ€æ¶æˆ–æŠ½å±œã€‚' },
  { id:'towel_by_stove',x: 12.2, y: 37.2, title:'ç“¦æ–¯çˆæ—æ”¾æ¯›å·¾', room:'å»šæˆ¿', description:'ç“¦æ–¯çˆé‚Šæ™¾æ¯›å·¾æœ‰ç«ç½é¢¨éšªï¼Œæ¯›å·¾æ‡‰é é›¢ç«æºæ™¾æ›¬ã€‚' },
  { id:'curtain_cord', x: 60.8, y: 13.6, title:'çª—ç°¾æ‹‰ç¹©', room:'å®¢å»³', description:'ä½æ›çš„çª—ç°¾æ‹‰ç¹©æ²’æœ‰ç¶èµ·ä¾†ï¼Œå¯èƒ½é€ æˆå¹¼å…’çºç¹å±éšªï¼Œæ‡‰ç¶é«˜æˆ–ä½¿ç”¨å®‰å…¨æ‰£ã€‚' },
  { id:'low_sill',     x: 86.2, y: 16.0, title:'çª—å°éä½', room:'å®¢å»³', description:'çª—æˆ¶çª—å°é«˜åº¦å¾ˆä½ï¼Œå¹¼å…’å®¹æ˜“çˆ¬ä¸Šè·Œè½ï¼Œæ‡‰å®‰è£çª—æˆ¶å®‰å…¨é–ã€‚' },
  { id:'medicine_table',x: 70.8, y: 28.0, title:'è—¥å“æ”¾ç½®ä¸ç•¶', room:'å®¢å»³', description:'èŒ¶å‡ ä¸Šæ”¾ç½®è—¥å“ï¼Œå¹¼å…’å®¹æ˜“èª¤é£Ÿï¼Œæ‡‰æ”¾åœ¨é«˜è™•æˆ–ä¸Šé–æ«ƒå­è£¡ã€‚' },
  { id:'sharp_table',  x: 69.5, y: 38.3, title:'æ¡Œè§’é‹’åˆ©', room:'å®¢å»³', description:'èŒ¶å‡ å››è§’é‹’åˆ©ï¼Œå¹¼å…’è·‘å‹•æ™‚å®¹æ˜“æ’å‚·ï¼Œæ‡‰å®‰è£é˜²æ’è§’å¥—ã€‚' },
  { id:'heater_floor', x: 84.0, y: 36.5, title:'é›»æš–çˆæ”¾åœ°ä¸Š', room:'å®¢å»³', description:'é›»æš–çˆæ”¾åœ¨åœ°ä¸Šï¼Œå¹¼å…’å¯èƒ½æ‹‰æ‰¯é›»ç·šç‡™å‚·ï¼Œæ‡‰æ”¾åœ¨å®‰å…¨é«˜è™•ã€‚' },
  { id:'crib_no_guard',x: 43.0, y: 66.8, title:'å¬°å…’åºŠç„¡è­·æ¬„', room:'æˆ¿é–“', description:'å¬°å…’åºŠé‚Šæ²’æœ‰è­·æ¬„ï¼Œå¬°å…’å¯èƒ½è·Œè½ï¼Œæ‡‰å®‰è£åºŠé‚Šè­·æ¬„ã€‚' },
  { id:'small_parts',  x: 33.0, y: 83.0, title:'åœ°é¢æ•£è½å°é›¶ä»¶', room:'æˆ¿é–“', description:'å°é›¶ä»¶æ‰åœ¨åœ°ä¸Šï¼Œå¬°å…’å¯èƒ½èª¤é£Ÿçª’æ¯ï¼Œæ‡‰ç«‹å³æ¸…ç†ã€‚' },
  { id:'cleanser_table',x: 62.0, y: 44.8, title:'æ¸…æ½”åŠ‘äº‚æ”¾', room:'æµ´å®¤', description:'æ¸…æ½”åŠ‘æ”¾åœ¨æ¡Œä¸Šï¼Œå¹¼å…’å¯èƒ½èª¤é£Ÿä¸­æ¯’ï¼Œæ‡‰æ”¾åœ¨é«˜è™•æˆ–ä¸Šé–æ«ƒå­ã€‚' },
  { id:'scissors_sink',x: 77.0, y: 56.2, title:'å‰ªåˆ€æ”¾æ´—æ‰‹å°', room:'æµ´å®¤', description:'å‰ªåˆ€æ”¾åœ¨æ´—æ‰‹å°ä¸Šï¼Œå¹¼å…’å®¹æ˜“æ‹¿åˆ°å—å‚·ï¼Œæ‡‰æ”¶ç´åœ¨å®‰å…¨è™•ã€‚' },
  { id:'slippery_floor',x: 66.5, y: 73.2, title:'åœ°æ¿æ¿•æ»‘', room:'æµ´å®¤', description:'æµ´å®¤åœ°æ¿æ¿•æ»‘æ²’æœ‰é˜²æ»‘å¢Šï¼Œå®¹æ˜“æ»‘å€’å—å‚·ï¼Œæ‡‰é‹ªè¨­é˜²æ»‘å¢Šã€‚' },
  { id:'cleanser_right',x: 88.8, y: 61.5, title:'æ¸…æ½”åŠ‘äº‚æ”¾', room:'æµ´å®¤', description:'æ¸…æ½”åŠ‘æ”¾åœ¨åœ°ä¸Šï¼Œå¹¼å…’å¯èƒ½èª¤é£Ÿä¸­æ¯’ï¼Œæ‡‰æ”¾åœ¨é«˜è™•æˆ–ä¸Šé–æ«ƒå­ã€‚' },
];

let foundDangers = [];
let currentDangerIndex = -1;
let gameCompleted = false;

function initGame(){
  const img = document.getElementById('house-image');
  document.getElementById('total-count').textContent = dangerData.length;
  img.addEventListener('load', createDangerPoints);
  if (img.complete) createDangerPoints();

  document.getElementById('toggleCalib').onclick = toggleCalib;
  document.getElementById('copyJSON').onclick = copyJSON;
  document.getElementById('copyJSON2').onclick = copyJSON;
  document.getElementById('prevBtn').onclick = ()=>{ selectIndex((selectedIndex-1+dangerData.length)%dangerData.length); };
  document.getElementById('nextBtn').onclick = ()=>{ selectIndex((selectedIndex+1)%dangerData.length); };

  // æ‰‹æ©ŸæŒ‰éˆ•äº‹ä»¶ï¼ˆé»æ“Šä¸€æ¬¡ç§»å‹•ï¼›é•·æŒ‰é€£çºŒç§»å‹•ï¼‰
  document.querySelectorAll('[data-action="move"]').forEach(btn=>{
    const dx = parseFloat(btn.dataset.dx), dy = parseFloat(btn.dataset.dy);
    let timer=null;
    const step = ()=>{ moveBy(dx, dy); };
    const start = ()=>{ step(); timer=setInterval(step, 100); };
    const stop = ()=>{ if(timer){ clearInterval(timer); timer=null; } };
    btn.addEventListener('mousedown', start);
    btn.addEventListener('touchstart', (e)=>{ e.preventDefault(); start(); }, {passive:false});
    ['mouseup','mouseleave','touchend','touchcancel'].forEach(ev=>btn.addEventListener(ev, stop));
    btn.addEventListener('click', (e)=>{ e.preventDefault(); step(); }); // å–®æ“Šä¹Ÿæœ‰æ•ˆ
  });
}

function createDangerPoints(){
  const container = document.querySelector('.image-wrap');
  const img = document.getElementById('house-image');

  img.onclick = (e)=>{
    if(calib) return; // æ ¡æ­£æ¨¡å¼ä¸è§¸ç™¼éŠæˆ²é»æ“Š
    const rect = img.getBoundingClientRect();
    const x = ((e.clientX - rect.left)/rect.width)*100;
    const y = ((e.clientY - rect.top)/rect.height)*100;

    dangerData.forEach((d, i)=>{
      if(foundDangers.includes(i)) return;
      const dist = Math.hypot(x-d.x, y-d.y);
      if(dist<=6.5){
        revealPoint(i);
        openDangerModal(i);
      }
    });
  };

  dangerData.forEach((d, i)=>{
    const el = document.createElement('div');
    el.className = 'danger-point';
    el.style.left = d.x+'%'; el.style.top = d.y+'%';
    el.title = `${d.room} - ${d.title}`;
    el.onclick = ()=>openDangerModal(i);
    container.appendChild(el);
  });

  drawGrid();
}

function revealPoint(i){
  const els = document.querySelectorAll('.danger-point');
  const el = els[i];
  if(!el.classList.contains('revealed')) el.classList.add('revealed');
}

function openDangerModal(i){
  if(foundDangers.includes(i)) return;
  currentDangerIndex = i;
  const d = dangerData[i];
  document.getElementById('modal-title').textContent = `ğŸš¨ ${d.room} - ${d.title}`;
  document.getElementById('modal-description').textContent = d.description;
  document.getElementById('danger-modal').style.display='flex';
}

function closeDangerModal(){
  document.getElementById('danger-modal').style.display='none';
  if(currentDangerIndex!==-1){
    addSticker(currentDangerIndex);
    foundDangers.push(currentDangerIndex);
    updateStats();
    const els = document.querySelectorAll('.danger-point');
    els[currentDangerIndex].classList.remove('revealed');
    els[currentDangerIndex].style.display='none';
    currentDangerIndex=-1;
    if(foundDangers.length>=5 && !gameCompleted){
      gameCompleted=true;
      setTimeout(()=>document.getElementById('completion-modal').style.display='flex',500);
    }
  }
}

function closeCompletionModal(){
  document.getElementById('completion-modal').style.display='none';
}

function addSticker(i){
  const wrap = document.querySelector('.image-wrap');
  const d = dangerData[i];
  const s = document.createElement('div');
  s.className='protection-sticker';
  s.style.left = d.x+'%'; s.style.top = d.y+'%';
  s.textContent='ğŸ›¡ï¸';
  s.title=`å·²ä¿®æ­£ï¼š${d.title}`;
  wrap.appendChild(s);
}

function updateStats(){
  const found=foundDangers.length, total=dangerData.length;
  const pct = Math.round((found/total)*100);
  document.getElementById('found-count').textContent = found;
  document.getElementById('progress').textContent = pct+'%';
}

// ===== æ ¡æ­£æ¨¡å¼ =====
let calib=false, selectedIndex=0;

function toggleCalib(){
  calib=!calib;
  document.getElementById('toggleCalib').classList.toggle('active',calib);
  document.getElementById('grid').style.display = calib?'block':'none';
  document.getElementById('calibPanel').classList.toggle('show',calib);

  const els = document.querySelectorAll('.danger-point');
  els.forEach(el=>{
    if(calib){ el.classList.add('calib'); }
    else{ el.classList.remove('calib'); el.style.display='none'; }
  });

  if(calib){
    selectIndex(0);
    window.addEventListener('keydown', onKey);
  }else{
    window.removeEventListener('keydown', onKey);
  }
}

function selectIndex(i){
  selectedIndex = i;
  const els=document.querySelectorAll('.danger-point');
  els.forEach((el,idx)=>{ el.style.outline = (idx===selectedIndex)?'3px solid #1e90ff':'none'; });
  const d = dangerData[selectedIndex];
  document.getElementById('nowName').textContent = `${d.room} - ${d.title}`;
}

function onKey(e){
  const step = (e.shiftKey?1:0.2);
  if(e.key==='ArrowRight'){ moveBy(step,0); }
  if(e.key==='ArrowLeft'){  moveBy(-step,0); }
  if(e.key==='ArrowUp'){    moveBy(0,-step); }
  if(e.key==='ArrowDown'){  moveBy(0, step); }
  if(e.key==='a' || e.key==='A'){ selectIndex((selectedIndex-1+dangerData.length)%dangerData.length); }
  if(e.key==='d' || e.key==='D'){ selectIndex((selectedIndex+1)%dangerData.length); }
  if(e.key==='w' || e.key==='W'){ moveBy(0,-1); }
  if(e.key==='s' || e.key==='S'){ moveBy(0, 1); }
}

function moveBy(dx,dy){
  const d = dangerData[selectedIndex];
  d.x = Math.max(0, Math.min(100, d.x + dx));
  d.y = Math.max(0, Math.min(100, d.y + dy));
  const el = document.querySelectorAll('.danger-point')[selectedIndex];
  el.style.left = d.x + '%';
  el.style.top  = d.y + '%';
}

function copyJSON(){
  const simple = dangerData.map(({id,x,y,title,room,description})=>({id,x:+x.toFixed(1),y:+y.toFixed(1),title,room,description}));
  const text = 'const dangerData = ' + JSON.stringify(simple, null, 2) + ';';
  navigator.clipboard.writeText(text).then(()=>{
    alert('åº§æ¨™ JSON å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼Œå¯è²¼å›ç¨‹å¼ç¢¼ä¸­ï¼');
  });
}

// ç•« 10% ç¶²æ ¼ï¼Œæ–¹ä¾¿å°é½Š
function drawGrid(){
  const wrap=document.querySelector('.image-wrap');
  const cv=document.getElementById('gridcv');
  const dpr=window.devicePixelRatio||1;
  cv.width=wrap.clientWidth*dpr;
  cv.height=wrap.clientHeight*dpr;
  const ctx=cv.getContext('2d');
  ctx.scale(dpr,dpr);
  ctx.clearRect(0,0,wrap.clientWidth,wrap.clientHeight);
  ctx.strokeStyle='#6b7bff'; ctx.lineWidth=1;
  for(let i=0;i<=10;i++){
    const x=wrap.clientWidth*(i/10), y=wrap.clientHeight*(i/10);
    ctx.globalAlpha=.35;
    ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,wrap.clientHeight); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(wrap.clientWidth,y); ctx.stroke();
    ctx.globalAlpha=.7; ctx.fillStyle='#6b7bff'; ctx.font='12px system-ui';
    ctx.fillText((i*10)+'%', x+4, 14);
    ctx.fillText((i*10)+'%', 4, y-4);
  }
}

window.onload = initGame;
</script>
</body>
</html>
